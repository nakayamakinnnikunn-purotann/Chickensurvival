<!DOCTYPE html>
<html>
<head>
  <title>タップした方向に移動するプログラム</title>
  <style>
#canvas{
	display: block;
}
html, body, #game{
	width: 100%;
	height: 100%;
}
  </style>
</head>
<body>
 <div id=game> 
  <canvas id="canvas" width="" height=""></canvas>
  </div>
  <script>
    // Canvas要素の取得
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');

    // 画像の読み込み
    const image = new Image();
    image.src = 'images/Right00.png'; // 画像のパスを指定してください

    // 画像の初期位置
    let x = 100;
    let y = 100;

    // タップした位置の取得
    canvas.addEventListener('click', (event) => {
      const rect = canvas.getBoundingClientRect();
      const tapX = event.clientX - rect.left;
      const tapY = event.clientY - rect.top;

      // タップした方向に向かって移動
      moveImage(tapX, tapY);
    });

    // 画像の移動
    function moveImage(tapX, tapY) {
      const dx = tapX - x;
      const dy = tapY - y;

      // 移動距離と移動時間の計算
      const distance = Math.sqrt(dx * dx + dy * dy);
      const speed = 5; // 移動速度を調整する場合は、適宜変更してください
      const duration = distance / speed;

      // 移動アニメーション
      const startTime = performance.now();
      requestAnimationFrame(function animate(currentTime) {
        const elapsedTime = currentTime - startTime;
        const progress = elapsedTime / duration;

        // 画像の座標更新
        x = lerp(x, tapX, progress);
        y = lerp(y, tapY, progress);

        // Canvasのクリア
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // 画像の描画
        ctx.drawImage(image, x, y);

        // アニメーションの終了判定
        if (progress < 1) {
          requestAnimationFrame(animate);
        }
      });
    }

    // 線形補間
    function lerp(start, end, t) {
      return start * (1 - t) + end * t;
    }
  </script>
</body>
</html>
