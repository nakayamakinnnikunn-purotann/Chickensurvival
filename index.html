<!DOCTYPE html>
<html>
<head>
  <title>タップした方向に移動するプログラム</title>
  <style>
    #canvas {
      border: 1px solid black;
    }
  </style>
</head>
<body>
  <div id="container">
    <img id="image" src="images/Right00.png" alt="Image">
  </div>

  <script>
    // 画像要素の取得
    const image = document.getElementById('image');

    // 画像の初期位置
    let x = 100;
    let y = 100;

    // タップした位置の取得
    document.addEventListener('click', (event) => {
      const tapX = event.clientX;
      const tapY = event.clientY;

      // タップした方向に向かって移動
      moveImage(tapX, tapY);
    });

    // 画像の移動
    function moveImage(tapX, tapY) {
      const dx = tapX - (x + image.width / 2);
      const dy = tapY - (y + image.height / 2);

      // 移動距離と移動時間の計算
      const distance = Math.sqrt(dx * dx + dy * dy);
      const speed = 5; // 移動速度を調整する場合は、適宜変更してください
      const duration = distance / speed;

      // 移動アニメーション
      const startTime = performance.now();
      requestAnimationFrame(function animate(currentTime) {
        const elapsedTime = currentTime - startTime;
        const progress = elapsedTime / duration;

        // 画像の座標更新
        x = lerp(x, tapX - image.width / 2, progress);
        y = lerp(y, tapY - image.height / 2, progress);

        // 画像の位置更新
        image.style.left = x + 'px';
        image.style.top = y + 'px';

        // アニメーションの終了判定
        if (progress < 1) {
          requestAnimationFrame(animate);
        }
      });
    }

    // 線形補間
    function lerp(start, end, t) {
      return start * (1 - t) + end * t;
    }
  </script>
</body>
</html>
